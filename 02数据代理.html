<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <p>{{name}}</p>
        <button v-on:click="show">1111</button>
        <button v-on:mouseover="show">666666666666666666666666</button>
    </div>
</body>
<script>
   // console.log = ()=>{};
</script>
<!-- 编译模板 -->
<script src="./compile.js"></script>
<!-- 数据代理 -->
<script src="./mvvm2.x.js"></script>
<script>
    /*
        1.数据代理 , 实例对象来代理options.data对象中的属性数据操作
            通过Object.defineProperty中的get和set完成
            1.1: options.data中有什么属性 , 就给实例对象添加什么属性通过Object.defineProperty
            1.2: 通过Object.defineProperty中第三个参数(设置该属性的配置对象)中get和set , 当vm.xxx的时候取的是options.data.xxx 设置的时候vm.xxx = 'aaaa'设置其实是options.data.xxx='aaaa'
        2.模板解析(1):{{}}解析
            2.1: 将el的所有子节点取出 , 添加到一个新建的文档碎片中Fragment(document.createDocumentFragment)
            2.2: Fragment中的所有层次的子节点递归进行编译解析处理
                2.2.1: 对{{}}表达式文本节点进行解析 1.根据reg对象匹配得到表达式字符串{{name}}:自匹配/RegExp.$1得到name; 2.从data中取出表达式对应的值; 3.将属性值设置为文本节点的textContent
                2.2.2: 对元素节点的指令进行解析
             2.3: 将解析后的文档碎片Fragment添加el中显示
        2.模板解析(2): 事件指令解析
            1.从指令名名中获取事件名:
                1.1:ele.attributes获取所有属性的伪数组 , 
                1.2:遍历节点的属性数组 , item.value取收到某个属性的属性值就是事件的方法名show , item.name某个属性的属性名v-on:click
                1.3:根据v-判断是否指令属性 , 根据on判断是否是事件指令
                1.4:是事件指令的话:根据item.value去methods里面找到对应的方法名 , 并把事件绑定在DOM上
                1.5:移除指令
                
    
    
    */ 
    new Mvvm({
        el:'app',
        data:{
            name:'孙成龙'
        },
        methods:{
            show(){
                alert(this.name)
            }
        }
    })
    

</script>
</html>